{{define "parts/header.html"}}
<header class="bg-blue-600 text-white p-4 mb-6 relative" style="margin-bottom: 15px;">
    <div class="container mx-auto flex justify-between items-center">
        <div class="flex items-center">
            <!-- Fake Hamburger Menu for Mobile -->
            <button id="hamburgerBtn" class="flex flex-col justify-center items-center w-10 h-10 mr-2 focus:outline-none" aria-label="Open menu" onclick="document.getElementById('mobileDropdown').classList.toggle('hidden')">
                <span class="block w-6 h-0.5 bg-white mb-1"></span>
                <span class="block w-6 h-0.5 bg-white mb-1"></span>
                <span class="block w-6 h-0.5 bg-white"></span>
            </button>
            <h1 class="text-2xl font-bold"><img style="width: 300px;height: 50px;" src="/static/images/MAgentoGO-logo.png" alt="Magento.Go" class="w-10 h-10"></h1>
            <nav>
                <!-- Add navigation links here if needed -->
            </nav>
        </div>
        <div class="relative inline-block">
            <button type="button" id="cart-icon" class="ml-4 hover:text-yellow-300 flex items-center" aria-label="Cart">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path stroke-linecap="round" stroke-linejoin="round" d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
            </button>
            <div id="cart-dropdown" class="hidden absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded shadow-lg z-50">
                <div class="p-4 text-gray-600 text-center">Cart is empty</div>
            </div>
        </div>
    </div>
    <!-- Dynamic Dropdown for Mobile -->
    <div id="mobileDropdown" class="md:hidden absolute left-0 right-0 top-full bg-white text-blue-600 shadow-lg hidden z-50">
        <ul class="flex flex-col divide-y divide-blue-100">
            {{.CategoryTreeHTML}}
        </ul>
    </div>
</header>
{{end}}

{{define "category_tree"}}
    {{- range . }}
        <li>
            <a href="/category/{{.Category.EntityID}}" class="block px-6 py-3 hover:bg-blue-50">
                {{with index .Attributes "name"}}
                    {{if .value}}{{.value}}{{else}}{{$.Category.EntityID}}{{end}}
                {{else}}
                    {{$.Category.EntityID}}
                {{end}}
            </a>
            {{if .Children}}
                <ul class="ml-4 border-l border-blue-100">
                    {{template "category_tree" .Children}}
                </ul>
            {{end}}
        </li>
    {{- end}}
{{end}}

{{define "attrValueOrID"}}
    {{if .0}}
        {{with index .0 "value"}}{{.}}{{else}}{{.1}}{{end}}
    {{else}}
        {{.1}}
    {{end}}
{{end}}

<script>
document.addEventListener('DOMContentLoaded', function() {
  const cartIcon = document.getElementById('cart-icon');
  const cartDropdown = document.getElementById('cart-dropdown');

  if (!cartIcon || !cartDropdown) {
    console.log('Cart icon or dropdown not found!');
    return;
  }

  cartIcon.addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    cartDropdown.classList.toggle('hidden');
    // Debug
    console.log('Cart icon clicked, dropdown toggled');
    return false;
  });

  cartDropdown.addEventListener('click', function(e) {
    e.stopPropagation();
  });

  // Hide dropdown when clicking outside
  document.addEventListener('click', function(e) {
    cartDropdown.classList.add('hidden');
  });
});
</script> 